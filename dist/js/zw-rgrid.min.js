document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("table.zw-rgrid").forEach(function(item){processTable(item)});document.querySelectorAll(".zw-rgrid-header-mobile").forEach(function(item){item.addEventListener("click",function(){toggleExpanded(this)})})},false);function processTable(table){var tableId=table.id;var table_headers=table.querySelectorAll("table#"+tableId+" > thead > tr > th");var table_rows=table.querySelectorAll("table#"+tableId+" > tbody tr");var has_pk=hasPrimaryKey(table_headers);table_rows.forEach(function(row){var table_cells=row.querySelectorAll("td:not(.zw-rgrid-header-mobile)");var PkValues;if(has_pk){PkValues=extractPrimaryKeyValues(table_headers,table_cells);insertMobileHeaderCell(PkValues,row)}setAttributesAndClasses({table_cells:table_cells,table_headers:table_headers})})}function hasPrimaryKey(table_headers){return Array.from(table_headers).some(function(obj){return obj.dataset.pk})}function extractPrimaryKeyValues(table_headers,table_cells){return Array.from(table_headers).reduce(function(values,obj,index){if(obj.dataset.pk&&table_cells.length>0){values.push(table_cells[index].innerText)}return values},[])}function insertMobileHeaderCell(PkValues,row){var td_header_mobile=createHeaderMobile(PkValues);row.insertBefore(td_header_mobile,row.querySelector("td:not(.zw-rgrid-header-mobile)"))}function createHeaderMobile(strPkValue){var td_header_mobile=document.createElement("td");td_header_mobile.classList.add("zw-rgrid-header-mobile");td_header_mobile.innerText=strPkValue.join(", ");return td_header_mobile}function setAttributesAndClasses(_a){var table_cells=_a.table_cells,table_headers=_a.table_headers;Array.from(table_cells).forEach(function(cell,index){cell.setAttribute("data-th",table_headers[index].innerText);if(table_headers[index].dataset.hide){cell.classList.add("zw-rgrid-detail")}})}function toggleExpanded(element){element.closest("tr").classList.toggle("expanded")}